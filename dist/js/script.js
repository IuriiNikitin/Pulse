"use strict";import catalogItemsData from"./catalog-items-data.js";function fadeIn(e,t){const a=e.classList[0];e.classList.add(a+"_active","animate__animated","animate__fadeIn"),e.onanimationend=a=>{"fadeIn"===a.animationName&&(e.classList.remove("animate__fadeIn"),t&&t())},e.classList.remove("animate__fadeOut")}function fadeOut(e,t){const a=e.classList[0];e.classList.remove("animate__fadeIn"),e.classList.add("animate__fadeOut"),e.onanimationend=o=>{"fadeOut"===o.animationName&&(e.classList.remove(a+"_active"),e.classList.remove("animate__fadeOut"),t&&t())}}const catalogContent=document.querySelectorAll(".catalog__content");catalogContent.forEach((e=>{catalogItemsData.filter((t=>t.purpose===e.dataset.purpose)).forEach((t=>{let a="<ul>";t.list.forEach((e=>{a+=`<li>${e}</li>`})),a+='</ul><a href="#" class="catalog-item__back">НАЗАД</a>';const o=new Intl.NumberFormat("ru").format(t.price),n=new Intl.NumberFormat("ru").format(t.oldPrice),l=`\n    <div class="catalog-item">\n      <div class="catalog-item__wrapper">\n          <div class="catalog-item__content catalog-item__content_active">\n              <img src=${t.img} alt="item_img" class="catalog-item__img">\n              <div class="catalog-item__title">${t.name} <br> ${t.model}</div>\n              <div class="catalog-item__subtitle">${t.subtitle}</div>\n              <a href="#" class="catalog-item__link">ПОДРОБНЕЕ</a>\n          </div>\n          <div class="catalog-item__list">\n            ${a}\n          </div>\n      </div>\n      <hr>\n      <div class="catalog-item__footer">\n          <div class="catalog-item__prices">\n              <div class="catalog-item__old-price">${n} руб.</div>\n              <div class="catalog-item__price">${o} руб.</div>\n          </div>\n          <button class="button button_mini" data-modal="order">КУПИТЬ</button>\n      </div>\n    </div>`;e.innerHTML+=l}))}));const slider=tns({container:".carousel__inner",items:1,slideBy:"page",nav:!0,navPosition:"bottom",controls:!1,responsive:{768:{nav:!1}}});document.querySelector(".carousel__prev").addEventListener("click",(()=>{slider.goTo("prev")})),document.querySelector(".carousel__next").addEventListener("click",(()=>{slider.goTo("next")}));const catalog=document.querySelector(".catalog"),catalogItem=catalog.querySelectorAll(".catalog-item"),catalogLinks=catalog.querySelectorAll(".catalog-item__link , .catalog-item__back"),contentClass="catalog-item__content",listClass="catalog-item__list";catalogLinks.forEach(((e,t)=>{e.addEventListener("click",(e=>{e.preventDefault();const a=catalogItem[Math.trunc(t/2)].querySelector("."+contentClass),o=catalogItem[Math.trunc(t/2)].querySelector("."+listClass);if(window.innerWidth>=576)a.classList.toggle(contentClass+"_active"),o.classList.toggle(listClass+"_active");else{const e=overlay.querySelector("#about"),t=a.querySelector(".catalog-item__title").textContent,n=a.querySelector(".catalog-item__subtitle").textContent,l=a.querySelector("img").src,c=o.querySelector("ul").innerHTML;e.querySelector(".modal__subtitle").innerText=t,e.querySelector("img").src=l,e.querySelector(".modal__descr").innerText=n,e.querySelector("ul").innerHTML=c,fadeIn(overlay),fadeIn(e)}}))}));const tabs=catalog.querySelectorAll(".catalog__tab"),content=catalog.querySelectorAll(".catalog__content");tabs.forEach(((e,t)=>{e.addEventListener("click",(()=>{for(let e=0;e<tabs.length;e++)tabs[e].classList.remove("catalog__tab_active"),content[e].classList.remove("catalog__content_active");tabs[t].classList.add("catalog__tab_active"),content[t].classList.add("catalog__content_active")}))}));const overlay=document.querySelector(".overlay"),modals=overlay.querySelectorAll(".modal"),consultBtns=document.querySelectorAll("[data-modal=consultation]"),orderBtns=document.querySelectorAll("[data-modal=order]");consultBtns.forEach((e=>{e.addEventListener("click",(()=>{const e=overlay.querySelector("#consultation");fadeIn(overlay),fadeIn(e)}))})),orderBtns.forEach(((e,t)=>{e.addEventListener("click",(()=>{const e=overlay.querySelector("#order"),a=catalogItem[t].querySelector(".catalog-item__title").textContent;e.querySelector(".modal__descr").innerText=a,fadeIn(overlay),fadeIn(e)}))})),modals.forEach((e=>{e.querySelector(".modal__close").addEventListener("click",(()=>{fadeOut(overlay),fadeOut(e)}))}));const formHandle=document.querySelectorAll("form"),validatorOptions={locale:"ru",autoHideErrors:!0,messages:{ru:{name:{empty:"Это обязательное поле",incorrect:"Неправильное имя"},phone:{empty:"Это обязательное поле",incorrect:"Неправильный номер телефона"},email:{empty:"Это обязательное поле",incorrect:"Неправильный E-mail"},minlength:{incorrect:"Слишком короткий номер телефона"},required:{empty:"Это обязательное поле"}}}};formHandle.forEach((e=>{new Validator(e,(function(t,a){return a?(submitData(e),!1):a}),validatorOptions)})),document.querySelectorAll("input[name=phone]").forEach((e=>{IMask(e,{mask:"+{7}(000)000-00-00"})}));const pageUp=document.querySelector(".pageup");function submitData(e){const t=new FormData(e),a=Object.fromEntries(t.entries());console.log(a);const o=overlay.querySelector("#thanks");e.parentNode.classList.contains("modal")?fadeOut(e.parentNode,(()=>{e.reset(),fadeIn(o)})):(fadeIn(overlay),fadeIn(o,(()=>{e.reset()})))}window.addEventListener("scroll",(()=>{window.pageYOffset>1600?"none"===getComputedStyle(pageUp).display&&fadeIn(pageUp):fadeOut(pageUp)})),(new WOW).init();